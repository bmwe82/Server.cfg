/////////////////////////////////////////////////////////////////////////////////
//    SERVIDOR CS2 COMPETITIVO OTIMIZADO - ARQUITETURA SUB-TICK (2025/26)      //
//    AUDITORIA TÉCNICA E REESTRUTURAÇÃO COMPLETA                              //
/////////////////////////////////////////////////////////////////////////////////

// --- 1. IDENTIDADE E ACESSO DO SERVIDOR ---
hostname "CS2 Competitivo"
rcon_password "ALTERAR_ESTA_SENHA_IMEDIATAMENTE_PARA_UMA_FORTE" // Proteção administrativa
sv_password ""                                   // Senha de entrada (deixar vazio para público)
sv_lan 0                                         // 0 = Servidor Internet (Anuncia na Master List)
sv_region 3                                      // 3 = Europa (Ajustar: 0=US East, 1=US West, 2=S. America, etc.)
sv_tags "competitivo,128tick,faceit,mr12"       // Tags para browser de servidores

// --- 2. OTIMIZAÇÃO DE REDE E THROUGHPUT (CRÍTICO) ---
// Em infraestruturas modernas, o gargalo não deve ser artificialmente imposto pelo software.
sv_maxrate 0             // 0 = Ilimitado. Permite bursts acima de 1Gbps se necessário durante rondas pesadas.
sv_minrate 786432        // Força mínima de ~6.2 Mbps. Garante consistência de hitbox entre todos os clientes.
                         // AVISO: Se o servidor estiver numa rede doméstica (uplink < 50Mbps), reduzir para 196608.

sv_parallel_sendsnapshot 1 // Habilita multithreading para envio de pacotes. Vital para CPUs modernos.
net_splitrate 2          // Aumenta a agressividade da fragmentação de pacotes para reduzir latência de frames complexos.[6]
sv_clockcorrection_msecs 15 // Reduz janela de correção de lag (Padrão 30). Penaliza laggers, beneficia low-ping.

// --- 3. REGRAS DE JOGO: PADRÃO ESL/FACEIT MR12 ---
mp_maxrounds 24          // Formato MR12 (Máximo 24 rondas regulamentares).[13]
mp_halftime 1            // Troca de lados automática ao fim de 12 rondas.
mp_halftime_duration 15  // Intervalo curto.

// Temporizadores Precisos
mp_roundtime_defuse 1.92 // OBRIGATÓRIO: 1.92 = 1m 55s. Valores como '2' quebram o equilíbrio do mapa.[14, 15]
mp_c4timer 40            // Tempo de explosão da bomba.
mp_freezetime 20         // Tempo de planeamento tático (Standard Competitivo Elevado).
mp_buytime 20            // Janela de compra.

// Economia
mp_startmoney 800        // Início padrão.
mp_maxmoney 16000        // Teto padrão.
mp_overtime_enable 1     // Ativa prolongamento automático em empate 12-12.
mp_overtime_maxrounds 6  // MR3 (3 rondas cada lado).
mp_overtime_startmoney 10000 // Dinheiro suficiente para full buy no OT.

// --- 4. FEEDBACK DE JOGO E PREVISÃO ---
sv_damage_prediction_allowed 1 // Permite "instant feedback" no cliente. Essencial para gunplay moderno.
sv_showimpacts 0               // Desativa visualização de impactos (Debug apenas).[29]
ff_damage_reduction_grenade 0.85 // Padrão de fogo amigo.
ff_damage_reduction_bullets 0.33 // Padrão de fogo amigo.
mp_friendlyfire 1                // Fogo amigo ligado.

// --- 5. COMUNICAÇÃO E ÁUDIO ---
sv_deadtalk 1            // Mortos podem falar...
sv_full_alltalk 0        //...mas apenas com a sua equipa (Evita ghosting global).
sv_auto_full_alltalk_during_warmup_half_end 1 // QoL: Chat global aberto no aquecimento e intervalo.
sv_voiceenable 1         // Voz ativa.

// Proteção Anti-Flood (Camada de Aplicação)
sv_max_queries_sec 5.0   // Limite de queries por segundo/IP. Mitiga ataques de reflexão simples.
sv_max_queries_sec_global 120 // Limite global de queries.

// Sistema de Logs (Auditoria)
log on                   // Ativa logging.
sv_log_onefile 0         // Logs rotativos por data.
sv_logbans 1             // Regista todos os bans.
sv_logfile 1             // Escreve para disco.[30]

// --- 7. SOURCE TV (CSTV) - TRANSMISSÃO E DEMOS ---
tv_enable 0              // Ativa motor de transmissão.
tv_autorecord 0          // 0 = Manual (admin record), 1 = Automático (Cuidado com espaço em disco).
tv_maxclients 5          // Slots reservados para relays/espectadores.
tv_delay 105             // Delay anti-stream sniping (1m 45s).
tv_snapshotrate 128      // Qualidade máxima de demo. Reduzir para 64 se houver choke de CPU/Rede.[24, 25]
tv_advertise_watchable 1 // Permite que a partida apareça na aba "Watch" (se aplicável).


// --- 9. CONFIGURAÇÕES DIVERSAS E LIMPEZA ---
sv_hibernate_when_empty 0 // 0 = Servidor sempre pronto (resposta rápida). 1 = Hiberna (poupa CPU em VPS).
mp_autokick 0             // Desativa kick automático por suicídio/TK acidental (Controlo manual preferido).
sv_pausable 1             // Permite pausas táticas/técnicas.[12, 18]
mp_warmuptime 300         // 5 minutos de aquecimento até todos estarem prontos.

// Carregar Banimentos Persistentes
exec banned_user.cfg
exec banned_ip.cfg
writeid
writeip
